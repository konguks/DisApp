<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" type="text/css" href="jqm/jquery.mobile-min.css">
    <link rel="stylesheet" type="text/css" href="css/Map_main.less.css" class="main-less">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <script src="intelxdk.js"></script>
    <script src="cordova.js"></script>
    <script src="xhr.js"></script>
    <script src="xdk/init-dev.js"></script>
    <script src="js/app.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js"></script>
    <script type="application/javascript" src="lib/jquery.min.js"></script>
    <script type="application/javascript" src="jqm/jquery.mobile-min.js" data-ver="0"></script>
    <script type="application/javascript" src="js/Map_user_scripts.js"></script>
    <script type="application/javascript" src="xdk/ad/jqm_subpage.js"></script>
  </head>

  <body>
    <div class="upage" id="mainpage" data-role="page">
      <div class="upage-outer">
        <div data-role="header" class="container-group inner-element uib_w_1" data-uib="jquery_mobile/header" data-ver="0">
          <h1>Current Location</h1>
          <div class="widget-container wrapping-col single-centered"></div>
          <div class="widget-container content-area horiz-area wrapping-col left"></div>
          <div class="widget-container content-area horiz-area wrapping-col right"></div>
        </div>
        <div class="upage-content ac0 content-area vertical-col left" id="page_66_26">
          <div id="googleMap" style="width:100%;height:450px;"></div>

          <a class="widget uib_w_2 d-margins" data-uib="jquery_mobile/button" data-ver="0" data-role="button" id="mapback">Back</a>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("deviceready", function(){
            navigator.geolocation.getCurrentPosition(function(position){
                var image = new google.maps.MarkerImage("green2.png");
               
            var mapProp = {center:new google.maps.LatLng(position.coords.latitude,position.coords.longitude), zoom:15, mapTypeId:google.maps.MapTypeId.ROADMAP};
            var map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
            var marker=new google.maps.Marker({position:new google.maps.LatLng(position.coords.latitude,position.coords.longitude),icon:image});
            marker.setMap(map);
            }, function(error){
                if(error.code == PositionError.PERMISSION_DENIED)
                {
                    alert("App doesn't have permission to use GPS");
                }
                else if(error.code == PositionError.POSITION_UNAVAILABLE)
                {
                    alert("No GPS device found");
                }
                else if(error.code == PositionError.TIMEOUT)
                {
                    alert("Its taking too long find user location");
                }
                else
                {
                    alert("An unknown error occured");
                }
            }, { maximumAge: 3000, timeout: 50000, enableHighAccuracy: true });
        }, false);
    </script>
  </body>

</html>